(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{activate:()=>m,deactivate:()=>p});const r=require("vscode"),i={h1:/^# (.*$)/gim,h2:/^## (.*$)/gim,h3:/^### (.*$)/gim,h4:/^#### (.*$)/gim,h5:/^##### (.*$)/gim,h6:/^###### (.*$)/gim,b:/\*\*(.*)\*\*/gim,i:/\*(.*)\*/gim,br:/\n$/gim,a:/\[(.*?)\]\((.*?)\)/gim,bq:/^\> (.*$)/gim,img:/!\[(.*?)\]\((.*?)\)/gim},o=["h1","h2","h3","h4","h5","h6","b","i","br","a","bq","img"],s={h1:"<h1>$1</h1>",h2:"<h2>$1</h2>",h3:"<h3>$1</h3>",h4:"<h4>$1</h4>",h5:"<h5>$1</h5>",h6:"<h6>$1</h6>",b:"<b>$1</b>",i:"<i>$1</i>",br:"<br/>",a:"<a href='$2'>$1</a>",bq:"<blockquote>$1</blockquote>",img:"<img alt='$1' src='$2' />"};function n(e){for(const t of o)e=e.replace(i[t],s[t]);return e.trim()}class a{handleFile(e){let t=r.window.activeTextEditor;if(!t)return;let i=r.window.activeTextEditor.document.uri.path,o=t.document;if("markdown"===o.languageId)switch(e){case"html":return this._convertHtml(i,o);case"jsx":return this._convertJSX(i,o);default:return}else r.window.showErrorMessage("Only Markdown is available")}_convertHtml(e,t){return function(e,t){try{if(e)return r.window.showInformationMessage("Export Html Completed successfully"),n(t.getText())}catch(e){r.window.showErrorMessage("Error Occurred while exporting html file")}}(e,t)}_convertJSX(e,t){return function(e,t){try{if(e)return`import React from 'react';export default function Output() {\n    return (\n      <div>${n(t.getText())}</div>\n    )\n  }`}catch(e){r.window.showErrorMessage("Error Occurred while exporting JSX file")}}(e,t)}dispose(){}}const h=require("path");class l{constructor(e){this.type=r.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}}class c{constructor(e){this.type=r.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}}class u{constructor(){this.root=new c(""),this._emitter=new r.EventEmitter,this._bufferedEvents=[],this.onDidChangeFile=this._emitter.event}stat(e){return this._lookup(e,!1)}readDirectory(e){const t=this._lookupAsDirectory(e,!1),r=[];for(const[e,i]of t.entries)r.push([e,i.type]);return r}readFile(e){const t=this._lookupAsFile(e,!1).data;if(t)return t;throw r.FileSystemError.FileNotFound()}writeFile(e,t,i){const o=h.posix.basename(e.path),s=this._lookupParentDirectory(e);let n=s.entries.get(o);if(n instanceof c)throw r.FileSystemError.FileIsADirectory(e);if(!n&&!i.create)throw r.FileSystemError.FileNotFound(e);if(n&&i.create&&!i.overwrite)throw r.FileSystemError.FileExists(e);n||(n=new l(o),s.entries.set(o,n),this._fireSoon({type:r.FileChangeType.Created,uri:e})),n.mtime=Date.now(),n.size=t.byteLength,n.data=t,this._fireSoon({type:r.FileChangeType.Changed,uri:e})}rename(e,t,i){if(!i.overwrite&&this._lookup(t,!0))throw r.FileSystemError.FileExists(t);const o=this._lookup(e,!1),s=this._lookupParentDirectory(e),n=this._lookupParentDirectory(t),a=h.posix.basename(t.path);s.entries.delete(o.name),o.name=a,n.entries.set(a,o),this._fireSoon({type:r.FileChangeType.Deleted,uri:e},{type:r.FileChangeType.Created,uri:t})}delete(e){const t=e.with({path:h.posix.dirname(e.path)}),i=h.posix.basename(e.path),o=this._lookupAsDirectory(t,!1);if(!o.entries.has(i))throw r.FileSystemError.FileNotFound(e);o.entries.delete(i),o.mtime=Date.now(),o.size-=1,this._fireSoon({type:r.FileChangeType.Changed,uri:t},{uri:e,type:r.FileChangeType.Deleted})}createDirectory(e){const t=h.posix.basename(e.path),i=e.with({path:h.posix.dirname(e.path)}),o=this._lookupAsDirectory(i,!1),s=new c(t);o.entries.set(s.name,s),o.mtime=Date.now(),o.size+=1,this._fireSoon({type:r.FileChangeType.Changed,uri:i},{type:r.FileChangeType.Created,uri:e})}_lookup(e,t){const i=e.path.split("/");let o=this.root;for(const s of i){if(!s)continue;let i;if(o instanceof c&&(i=o.entries.get(s)),!i){if(t)return;throw r.FileSystemError.FileNotFound(e)}o=i}return o}_lookupAsDirectory(e,t){const i=this._lookup(e,t);if(i instanceof c)return i;throw r.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){const i=this._lookup(e,t);if(i instanceof l)return i;throw r.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){const t=e.with({path:h.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}watch(e){return new r.Disposable((()=>{}))}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout((()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0}),5)}}async function m(e){console.log("Markdown to JSX is activated");const t=new a,i=new u;e.subscriptions.push(r.workspace.registerFileSystemProvider("mdJSX",i,{isCaseSensitive:!0})),e.subscriptions.push(t),e.subscriptions.push(r.commands.registerCommand("markdown-to-jsx.initialize",(()=>{r.workspace.updateWorkspaceFolders(0,0,{uri:r.Uri.parse("mdJSX:/"),name:"MD2JSX"})}))),e.subscriptions.push(r.commands.registerCommand("markdown-to-jsx.convertToJSX",(()=>{const e=t.handleFile("jsx");e&&i.writeFile(r.Uri.parse("mdJSX:/output.jsx"),Buffer.from(e),{create:!0,overwrite:!0})}))),e.subscriptions.push(r.commands.registerCommand("markdown-to-jsx.convertToHtml",(()=>{const e=t.handleFile("html");e&&i.writeFile(r.Uri.parse("mdJSX:/output.html"),Buffer.from(e),{create:!0,overwrite:!0})})))}function p(){}module.exports=t})();